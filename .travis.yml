os: linux
dist: trusty
cache: false
sudo: required
language: bash
services: docker
env:
  matrix:
    - ARCH=x86_64 DISTRIB=debian
    - ARCH=x86_64 DISTRIB=alpine
    - ARCH=armhf DISTRIB=debian
    - ARCH=armhf DISTRIB=alpine
  global:
  - secure: l+ZqXlN3S6ub4w5C5hEGsqbTneZuDMZMRxfVNaEAThat0X+yBMoHwcguNyzTTW1QEFf0ar9bf0syWM5ChZI45UVlzWJh4V/4BHjcFWbBMK5U+eRktdhnQd3S1+zcSfLsdWn7GcKSdsZHCaoF8Ryt/YoYZBae7K4OaqfOwV2TvQJqDlKZ2VXmN8nwcZyss5T5Wa+URKDCRt/sE+ZtpLJaVC+nwG4uXF2CVC5P7YZh8qKeHJyzmkRF0KvQCMk6wSFIiBZbN9agqv+uE+luJu7hdecqKPq3fh5K1tbg7QRlx5ttJiRMH3PREiL2KFrp/aO477kk4kSdZYi6nCFYc49rP64w9lWJfFfCyhH2o2SmVdTE+UZHol3rL8WNj4RdBK+bI8i0YnlZCIJd8BkYtOF5A0K/Vnf3+4OJNw/y/lG/HC/4SqZHkpxIn/0XoQ/IiqKtkrdZXTPhMeP3I2U5u/NymhLbzZ2Qa44xTSTlzqqz0Gf3GpdKYNTP6c6bBfG+bv7RFffaTgxtCXt4xBQmLr0enfFKqE3vWJw3GgzVOI2KLC/mz/Qql+UEWiKrQEvTcUJMBlktQTYRSbZKzZqtEFNxAKRwV0kYwU8SOEc9RgbIDIJGpoKBlWkkaGeoEJacgu3VeGRkd8ARe86qwGhJWcKRwQV/51GN73w9cyAVxMJWj5c=
  - secure: BVe0aKVfiR0STRimaT/SkJ9q72mm0iVVQoVCBT8D0QYk59mpMQqkcCfjMSLuBG4zVDAn+8/aa2Z1za/8eQ4tdJLLE0u95GeAJvZF33Rr/StxBhTGAZWMmfTbieFgPFfEuoWFIexLNfDqZWsNYT3RdMKE3RQT382DOQlhYYTch3OYPu929Br/2XJ4Tx7ZO7UF1asJSHU5n969iaUu6RwIQE18ThNNVA+69j/Lk2J+fhZ719diH7BS7+Vp7IdsX6djU6+XoopYPqqJi57nogmUU0MSEUoapkiedb66Gc5/nGaigaEclyR3OPsqWt+/oIhCUhTqlIKhfcMsM4q6VHPXEVVyozEAlhyAwPQ/80ZY+htaJjA0mkJGrGRyoNcqrCc6AYP8XpnT90hQQdpHdsXBlHrJCVs/a0Wgn4ahK4Znz54hHKWvuAmPv2vsJIOL/t52MWSVgyrhYgZRppi/Spxu6va6DFYeMsKREWjS8VqtBV+Mc0hVAjsSZHo6PHMxaDJ01VaoejRqhWO133cZ4xaYz9dLRJdL+UyyntbWNExkyy6AslcAszZRYy1uevKfuwYb+fXY3uFaNoxdki8KRlKx1BxybbS4a1HfGY4b765azA+2uc078bNeAJ1ukX6i641J6xa0OUn2eUhpM43AXXk7W4q0m1TPLedASMD9gRWp9eg=
  - secure: DiCgGNsgEp4VrnxiSNV2mHvGLX3JRIUsDe4X1qJM01Y8eQ7MqrKYVyrmTsquWprEKlckhQNf0D0FGdsh3Buh8HKJFcPr9xhQpJc8IyDRSU9vpqi22d7H1AYzpO+m+VKzka/57Y85rT6WlHmK1mZozjDgB7zId3bx6JR3i5X+tGuA1JKzGnyOy/+I0QJI+I0arQJdH4OARFd/bX+DKinO2Pm2Fdy0+jqoBDskUdb0zNqNJVAP5U8n9czgoC4hxr76fjfIQ29N2N3Dmw+ZSajKWfWOEDHBoudFDupoK47UwC7ZDneT2owgHhxUqeRRwkA5UCytBobvUNpjepGQU8ybwUQw4xLC1S3xYlDoPpeefT56r3vE+aWQbturESEUMg7oSFYGaDFOvnrpf2WyKWxEhkalFqnnah2BZ9Sy+gsrrVWfwE85hNOXiOwy0Zriwny4WKrYwxzcoOtFtxQX8LcNUZGnNz0jpWAq+MiAD+H//JYO/VxArJ6r5GMWY29oWb1KFlN/KoOV2GMCw6dle24BwHlzlfCAbwz1kQIbGZGfJTWjpKPYkTnNfnfReREj/hCXtPp4NWK/WwuO/7rTmm3sUtm0K6mCiesjXWBWhMGqLADCkTwsI4j5hlf5IrGArw9Rs822aBCLuQaxaOPAFO4GVktTaHibTREXcM93FZgnoCM=

install: true
before_script:
- docker --version
- make --version
script:
  - make ARCH=${ARCH} DISTRIB=${DISTRIB} build 
after_success:
- docker login -u ${DOCKER_USER} -p ${DOCKER_PASS}
- make ARCH=${ARCH} DISTRIB=${DISTRIB} push
after_script:
- docker logout
- make clean
